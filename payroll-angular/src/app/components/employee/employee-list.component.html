<div class="employee-list-container">
  <!-- Status Filter -->
  <div class="filter-section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 16px 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
    <div style="display: flex; align-items: center; gap: 12px;">
      <label for="statusFilter" style="font-weight: 600; color: white; font-size: 15px; min-width: 60px;">üìä Status:</label>
      <select 
        id="statusFilter" 
        [ngModel]="statusFilter()" 
        (ngModelChange)="handleStatusChange($event)"
        style="flex: 1; max-width: 200px; padding: 10px 36px 10px 14px; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; font-size: 14px; font-weight: 500; background: white; color: #495057; cursor: pointer; outline: none; transition: all 0.2s; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        <option value="ALL">üìä All Statuses</option>
        <option value="ACTIVE">‚úÖ Active</option>
        <option value="INACTIVE">‚è∏Ô∏è Inactive</option>
        <option value="DELETED">üóëÔ∏è Deleted</option>
      </select>
      <span style="color: rgba(255,255,255,0.9); font-size: 13px; margin-left: auto;">{{ totalElements() }} total</span>
    </div>
  </div>

  <div class="list-header">
    <h2 class="section-title">{{ getEmployeeListTitle() }}</h2>
    @if (!isEmployeeUser()) {
      <button (click)="goToAddEmployee()" class="add-button">
        ‚ûï Add Employee
      </button>
    }
  </div>

  <div class="table-container">
    <table class="employee-table">
      <thead class="table-header">
        <tr>
          <th class="table-cell clickable" (click)="handleSort('id')">
            ID / Name {{ getSortIcon('id') }}
          </th>
          <th class="table-cell text-center clickable" (click)="handleSort('grade')">
            Grade {{ getSortIcon('grade') }}
          </th>
          <th class="table-cell">Contact Info</th>
          <th class="table-cell">Bank Account</th>
          <th class="table-cell text-right clickable" (click)="handleSort('balance')">
            Balance {{ getSortIcon('balance') }}
          </th>
          <th class="table-cell text-center">Actions</th>
        </tr>
      </thead>
      <tbody class="table-body">
        @if (employees().length === 0 && !loading()) {
          <tr>
            <td colspan="6" class="empty-state-cell">
              <div class="empty-state">
                <div class="empty-icon">üë•</div>
                @if (isEmployeeUser()) {
                  <h3 class="empty-title">No Team Members</h3>
                  <p class="empty-text">You don't have any downstream employees yet.</p>
                  <p class="empty-hint">As employees join under you, they'll appear here.</p>
                } @else {
                  <h3 class="empty-title">No Employees Found</h3>
                  <p class="empty-text">No employees match your current filters.</p>
                  @if (statusFilter() !== 'ACTIVE') {
                    <button (click)="handleStatusChange('ACTIVE')" class="btn-reset">
                      Show Active Employees
                    </button>
                  }
                }
              </div>
            </td>
          </tr>
        }
        @for (emp of paginatedEmployees(); track emp.id) {
          <tr>
            <td class="table-cell">
              <div class="employee-info">
                <div class="employee-name">{{ emp.name }}</div>
                <div class="employee-id">ID: {{ emp.code }}</div>
              </div>
            </td>
            <td class="table-cell text-center">
              <div class="grade-badge">G{{ emp.grade.rank }}</div>
            </td>
            <td class="table-cell">
              <div class="text-sm">
                <div>{{ emp.address }}</div>
                <div class="text-gray-500">{{ emp.mobile }}</div>
              </div>
            </td>
            <td class="table-cell">
              <div class="bank-info">
                <span class="bank-name">{{ emp.account.accountName }}</span>
                <div class="bank-details">{{ emp.account.accountNumber }} ({{ emp.account.branchName }})</div>
              </div>
            </td>
            <td class="table-cell text-right">
              <div class="amount">{{ formatCurrency(emp.account.currentBalance) }}</div>
            </td>
            <td class="table-cell text-center">
              @if (!isEmployeeUser()) {
                <button (click)="handleEdit(emp)" class="action-button edit">‚úèÔ∏è</button>
                <button (click)="handleDelete(emp)" class="action-button delete">üóëÔ∏è</button>
              } @else {
                <span class="readonly-note">Read-only</span>
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <div class="pagination-controls">
      <span>Rows per page:</span>
      <select 
        [ngModel]="pageSize()" 
        (ngModelChange)="setPageSize($event)"
        class="page-size-select">
        <option [value]="5">5</option>
        <option [value]="10">10</option>
        <option [value]="20">20</option>
      </select>
    </div>
    <div class="pagination-buttons">
      <button (click)="setPage(0)" [disabled]="currentPage() === 0" class="pagination-btn">
        ‚èÆÔ∏è First
      </button>
      <button (click)="setPage(currentPage() - 1)" [disabled]="currentPage() === 0" class="pagination-btn">
        ‚Üê Prev
      </button>
      <span class="page-info">{{ currentPage() + 1 }}</span>
      <button (click)="setPage(currentPage() + 1)" [disabled]="currentPage() >= totalPages() - 1" class="pagination-btn">
        Next ‚Üí
      </button>
      <button (click)="setPage(totalPages() - 1)" [disabled]="currentPage() >= totalPages() - 1" class="pagination-btn">
        Last ‚è≠Ô∏è
      </button>
      <span class="page-summary">
        Page {{ currentPage() + 1 }} of {{ totalPages() }} ({{ totalElements() }} total)
      </span>
    </div>
  </div>
</div>
